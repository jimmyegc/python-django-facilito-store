{% load product_extras %}
<!-- Product Card -->
<div
  class="rounded-2xl shadow-md hover:shadow-lg transition flex flex-col overflow-hidden transition-colors duration-300"
  style="background-color: rgb(var(--color-bg-card)); border: 1px solid rgba(var(--color-border),0.3); color: rgb(var(--color-text));">

  <!-- Imagen del producto -->
  <div class="relative overflow-hidden rounded-lg">
    <img src="{{ product.image.url }}" alt="{{ product.title }}"
      class="w-full h-56 object-cover transition-transform duration-300 ease-in-out hover:scale-105">

    {% if product.stock == 0 %}
    <!-- Capa de "no disponible" -->
    <div class="absolute inset-0 flex items-center justify-center bg-gray-500/50">
      <span class="text-lg font-semibold uppercase tracking-wide">
        No disponible
      </span>
    </div>
    {% endif %}
  </div>

  <!-- Contenido -->
  <div class="p-4 flex flex-col flex-1">

    <!-- Título -->
    <h3 class="text-lg font-semibold mb-2 line-clamp-2" style="color: rgb(var(--color-text));">
      {{ product.title }}
    </h3>

    <!-- Precio -->
    <p class="text-xl font-bold mb-2" style="color: rgb(var(--color-primary));">
      {{ product.price|price_format }}
    </p>

    <!-- Stock -->
    <span class="px-3 py-1.5 rounded-full text-sm font-semibold tracking-wide shadow-sm transition-all duration-300 border inline-flex items-center gap-1 w-fit
    {% if product.stock %}
      bg-green-100 text-green-800 border-green-200 hover:bg-green-200
      dark:bg-green-900 dark:text-green-100 dark:border-green-800 dark:hover:bg-green-800
    {% else %}
      bg-red-100 text-red-800 border-red-200 hover:bg-red-200
      dark:bg-red-900 dark:text-red-100 dark:border-red-800 dark:hover:bg-red-800
    {% endif %}
  ">
      {% if product.stock %}
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-500 dark:text-green-300" fill="currentColor"
        viewBox="0 0 20 20">
        <path fill-rule="evenodd"
          d="M16.707 5.293a1 1 0 0 1 0 1.414l-7.071 7.071a1 1 0 0 1-1.414 0L3.293 9.536a1 1 0 1 1 1.414-1.414l4.219 4.218 6.364-6.364a1 1 0 0 1 1.414 0z"
          clip-rule="evenodd" />
      </svg>
      Disponible
      {% else %}
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-red-500 dark:text-red-300" fill="currentColor"
        viewBox="0 0 20 20">
        <path fill-rule="evenodd"
          d="M4.293 4.293a1 1 0 0 1 1.414 0L10 8.586l4.293-4.293a1 1 0 1 1 1.414 1.414L11.414 10l4.293 4.293a1 1 0 0 1-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L8.586 10 4.293 5.707a1 1 0 0 1 0-1.414z"
          clip-rule="evenodd" />
      </svg>
      No disponible
      {% endif %}
    </span>



    <!-- Botón -->
    <a href="{% url 'products:product' product.slug %}"
      class="mt-2 btn-primary w-full font-semibold py-2 px-4 rounded-lg text-center transition-shadow duration-300 shadow"
      {% if not product.stock %} aria-disabled="true" style="opacity:0.6; pointer-events:none;" {% endif %}>
      Ver más
    </a>

  </div>
</div>